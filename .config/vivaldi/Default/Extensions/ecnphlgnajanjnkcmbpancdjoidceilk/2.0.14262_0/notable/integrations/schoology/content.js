function injectScript(e,t){var n=document.getElementsByTagName(t)[0],i=document.createElement("script");i.setAttribute("type","text/javascript"),i.setAttribute("src",e),n.appendChild(i)}function injectStyle(e,t){var n=document.getElementsByTagName(t)[0],i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("href",e),n.appendChild(i)}function getTitle(){let e=document.querySelector(".gen-post-link");return e?e.innerText.trim():""}function editAfterAssignmentCreated(e){if(getTitle()===e.assignment_name.trim()){document.querySelector(".folder-contents-cell .action-edit a").click()}}if(document.querySelector('link[href="/sites/all/themes/schoology_theme/print.css"]')||document.querySelector('link[href="/sites/all/themes/schoology_theme/favicon.ico"]')||window.location.origin.match(/^https?:\/\/\S+.schoology.com$/)){injectScript(chrome.extension.getURL("notable/integrations/schoology/page_script.js"),"head"),injectStyle(chrome.extension.getURL("notable/integrations/schoology/styles.css"),"head");try{chrome.storage.sync.get("notable.user",function(e){var t=e["notable.user"],n=document.getElementsByTagName("head")[0],i=document.createElement("meta");i.setAttribute("id","kamidata"),i.setAttribute("data-kami-user-id",t.id),n.appendChild(i)})}catch(e){}window.addEventListener("message",function(e){"kami-assignment-create"===e.data.event_name&&sessionStorage.setItem("kami-assignment-created",JSON.stringify(e.data))});let e=sessionStorage.getItem("kami-assignment-created");if(e){sessionStorage.removeItem("kami-assignment-created");try{let t=JSON.parse(e);t.timestamp&&t.timestamp>Date.now()-5e3&&editAfterAssignmentCreated(t)}catch(e){console.log("Error from content script: ",e)}}}